(function(){function e(e){$(document).ready(function(){if($("#ember-root-shadow")){$("#ember-root-shadow").hide()}});var t=cacheClass.getGlobalCache("contest-page",e);var s=cacheClass.getGlobalCache("user",e);var r=function(t){if(t!=e){window.localStorage.clear();window.location.reload()}};var i=function(){$("body").find(".todo-widget").find("input").unbind("click");$("body").find(".todo-widget").find("input").click(function(e){var s=e.target;var r=$(this).attr("problem");var i=$(this).attr("contest");var o=function(e){if(typeof $.growl==="function"){$.growl({title:"Success",message:e.message})}else{$($(s).next(".todo-button-message")[0]).html(e.message)}$(s).prop("src","/sites/all/themes/abessive/images/add2.png");$(s).prop("title","Problem already present in Todo list");var o=t.get(i);if(!Ember.isEmpty(o)){var n=o.todos;if(Ember.isEmpty(n)){n={}}n[r]=true;t.update(i,o,120)}if(Ember.isEmpty(i)){i="PRACTICE"}var a=i+r;var l=t.get(a);if(!Ember.isEmpty(l)){l.todo=true;t.update(a,l,120)}incrementNotifCouter()};var n=function(e){var t=JSON.parse(e.responseText);if(typeof $.growl==="function"){$.growl({title:"Error",message:t.message})}else{$($(s).next(".todo-button-message")[0]).html(t.message)}};cAjax({type:"POST",url:"/api/todo/add",data:{pcode:r,ccode:i},success:o,error:n})})};var o=function(){$("div#problems-list tr").unbind("mouseover");$("div#problems-list tr").unbind("mouseout");$("div#problems-list tr").mouseover(function(){var e=$(this).find("td")[0];$(e).find(".todo-widget").css("visibility","visible")});$("div#problems-list tr").mouseout(function(){var e=$(this).find("td")[0];$(e).find(".todo-widget").css("visibility","hidden")})};var n=function(){$("body").find(".todo-widget").css("visibility","visible")};var a=Ember.Application.create({rootElement:"#ember-root"});a.Router.map(function(){this.route("contestPage",{path:"/:contest_code"});this.route("practiceProblemPage",{path:"/problems/:problem_code"});this.route("contestProblemPage",{path:"/:contest_code/problems/:problem_code"})});a.Router.reopen({rootURL:"/",location:"history"});a.ttl=120;a.ApplicationRoute=Ember.Route.extend({cache:s,setupController:function(e){cAjax({url:"/api/user/messages",success:function(e){if(e.status=="success"){u(e.messages)}},error:function(){pushError("Some error occurred")}});getUserKey().then(function(e){r(e)});var t="/api/user/me";this.setData(t,e)},setData:function(e,t){var s=this.get("cache");var r=s.get("user");var i=this;var o=function(e,s){if(Ember.isEmpty(s)){var r=i.get("cache");r.set("user",e,a.ttl)}Drupal.settings.username=e.user.username;t.set("model",e)};var n=function(e){if(!Ember.isEmpty(e.message)){pushError(e.message)}else{pushError("Some error occurred")}};if(!Ember.isEmpty(r)){o(r,true)}else{cAjax({url:e,success:o,error:n})}}});a.ApplicationController=Ember.Controller.extend({loading:true,modelObserver:function(){var e=this.get("model");if(!Ember.isEmpty(e)){Ember.$("#client-ip").text(e.ip);var t=moment(e.time*1e3).format("MMM DD, YYYY HH:mm:ss");formatTime(t);this.set("loading",false)}}.observes("model"),cache:s,username:function(){return this.getProperty("username")}.property("model.user"),isUserTeam:function(){return this.getProperty("isUserTeam")}.property("model.isUserTeam"),uid:function(){return this.getProperty("uid")}.property("model.uid"),oauthButtons:function(){return this.getProperty("oauth_buttons")}.property("model.user"),userProfileURL:function(){var e=this.get("username");return"<a href='/users/"+e+"'>Account</a>"}.property("username"),myTeamsURL:function(){var e=this.get("username");return"<a href='/users/"+e+"/teams'>My Teams</a>"}.property("username"),userEditProfileURL:function(){var e=this.get("uid");return"<a href='/user/"+e+"/edit'>Edit Profile</a>"}.property("uid"),userImage:function(){var e=this.getProperty("profileImage");var t=this.get("username");if(!Ember.isEmpty(e)&&!Ember.isEmpty(t)){return"<td><a href='/users/"+t+"'><div class='picture'>"+e+"</div> </a></td>"}return""}.property("model.user"),menu:function(){return this.get("model.menu")}.property("model.menu"),getProperty:function(e){var t=this.get("model");if(!Ember.isEmpty(t)){var s=this.get("model").user;if(s){return s[e]}}return""},loadingObserver:function(){if(!this.get("loading")){var e=this;Ember.run.next(e,function(){setupTodos();$(".loggedin-user span.right").click(function(e){$(".user-dropdown").toggle();e.stopPropagation()});$("body").click(function(e){$(".user-dropdown").hide()})})}}.observes("loading"),loginActionURL:function(){return"/node?destination="+location.pathname}.property()});var l=function(e,t,s){var r=s["partial_scores"][e["code"]];var i='<div data-tooltip="';var o=[];if(!Ember.isEmpty(r)){$.each(r,function(e,t){o.push("<span style=&quot;color:#EA2020;font-size:12px;&quot;>"+t["score"]+"</span><span style=&quot;font-size:12px;&quot;> ->"+t["count"]+"</span>")})}e["successful_submissions"]=parseInt(e["successful_submissions"]);i+=o.join(", ");i+='">';i+=e["successful_submissions"];i+="</div>";var n={solved:"green","partially-solved":"yellow",unsolved:"red",unattempted:""};e["meta"]={problem_code:e["code"],contest_code:t};e["score"]=i;e["problem_link"]="/"+t+"/problems/"+e["code"];e["submit_link"]="/"+t+"/submit/"+e["code"];e["status_link"]="/"+t+"/status/"+e["code"];e["status"]=Ember.isEmpty(s["problemsstats"]["partially_solved"][e["code"]])?Ember.isEmpty(s["problemsstats"]["solved"][e["code"]])?Ember.isEmpty(s["problemsstats"]["attempted"][e["code"]])?"unattempted":"unsolved":"solved":"partially-solved";e["mark"]=e["status"]!="unattempted"?"<img style='display:inline-block;   width: 15px; vertical-align: middle;' src = 'https://www.codechef.com/sites/all/modules/codechef_tags/images/"+e["status"]+".png' "+"title='"+e["status"]+"' />":"";e["color"]=n[e["status"]];var a='<div class="flexbox"><div class="todo-widget" style="visibility: hidden;"><input type="image" src="/sites/all/themes/abessive/images/add1.png" title="Add problem to Todo list" class="todo-button" width="25" height="25" problem="'+e["code"]+'" contest="'+t+'"><div class="todo-button-message"></div></div></div>';var l='<div class="flexbox"><div class="todo-widget" style="visibility: hidden;"><input type="image" src="/sites/all/themes/abessive/images/add2.png" title="Problem already present in Todo list" class="todo-button" width="25" height="25"><div class="todo-button-message"></div></div></div>';e["todo_widget"]=e["status"]!="solved"&&Ember.isEmpty(s.todos[e["code"]])?a:l;return e};a.ContestPageRoute=Ember.Route.extend({cache:t,setupController:function(e,t){getUserKey().then(function(e){r(e)},function(e){if(!Ember.isEmpty(e.message)){pushError(e.message)}else{pushError("Some error occurred")}});var s=t.contest_code;this.setData(s,e)},setData:function(e,t){t.set("loading",true);var s="/api/contests/"+e;var r=this.get("cache");var i=r.get(e);var o=this;if(typeof t.get("sortBy")==="function"){t.set("sortBy","successful_submissions");t.set("order","desc")}var n=function(s,r){if(s.status=="success"){if(Ember.isEmpty(r)){var i=o.get("cache");var n=parseInt(moment()/1e3);var c=moment(s.time.current);s.time.offset=n-c;s.time.generated=n;var d=a.ttl;if(s.time.current>s.time.end){d=0}if(!Ember.isEmpty(s.problems)){i.set(e,s,d)}if(!Ember.isEmpty(s.problems_data)){$.map(s.problems_data,function(e,t){if(!Ember.isEmpty(e.body)){e.time.offset=n-c;e.time.generated=n;if(!Ember.isEmpty(e.contest_code)){i.set(e.contest_code+e.problem_code,e,d)}else{i.set("PRACTICE"+e.problem_code,e,d)}}})}}t.set("data",s);var m=s.problems;m=$.map(m,function(e,t){e=l(e,s.code,s);return[e]});t.set("model",m)}else{pushAttention(s.message)}};var c=function(e){if(!Ember.isEmpty(e.message)){pushError(e.message)}else{pushError("Some error occurred")}};if(!Ember.isEmpty(i)){n(i,true)}else{cAjax({url:s,success:n,error:c})}}});var c=Ember.Mixin.create({searchable:false,filterable:false,sortable:false,queryParamsEnabled:false,rowTemplate:"singleRow",pagination:false});a.ContestPageController=Ember.ArrayController.extend(Ember.DataTableMixin,c,{loading:true,itemsPerPage:1e4,init:function(){this._super();this.setTableEmptyMessage('<div>Please click <a id="reload">here</a> to reload. If problem persists, please report to bugs@codechef.com</div>');this.timer()},cache:t,queryParams:["sortBy","order"],properties:["name","code","successful_submissions","accuracy","allow_submission","type","todo_widget"],hidden:["allow_submission","type","problem_link","submit_link","status_link","todo_widget"],headerAlias:Ember.Object.create({name:"Name",code:"Code",accuracy:"Accuracy",successful_submissions:"Successful Submissions"}),tweetText:function(){var e=this.get("data.name");return"CodeChef got a new treat for me in "+e}.property("data.name"),rowTemplate:"contestPageRow",model:[],queryParamsEnabled:true,sortable:true,isContestRunning:true,refreshTime:getRandomInt(a.ttl,a.ttl+30),contestCode:function(){return this.get("data.code")}.property("contestCode"),breadcrumbs:function(){var e=this.get("data.name");if(!Ember.isEmpty(e)){return'<a href="/">Home</a>&nbsp;»&nbsp;<a href="/contests/">Compete</a>&nbsp;»&nbsp;'+e}else{return""}}.property("data.name"),nid:function(){return this.get("data.nid")}.property("data.nid"),banner:function(){var e=this.get("data.banner");if(!Ember.isEmpty(e)){return e}else{return""}}.property("data.banner"),announcements:function(){var e=this.get("data.announcements");if(Ember.isEmpty(e)){return""}return Ember.ArrayController.createWithMixins(Ember.DataTableMixin,c,{model:[{data:e}],headerAlias:Ember.Object.create({data:"Announcements"})})}.property("data.announcements"),rules:function(){var e=this.get("data.rules");if(Ember.isEmpty(e)){return""}return Ember.ArrayController.createWithMixins(Ember.DataTableMixin,c,{model:[{data:e}],headerAlias:Ember.Object.create({data:"Contest Details"})})}.property("data.rules"),stats:function(){var e=this.get("data.stats");if(Ember.isEmpty(e)){return""}return Ember.ArrayController.createWithMixins(Ember.DataTableMixin,c,{model:[{data:e}],headerAlias:Ember.Object.create({data:"Stats"})})}.property("data.stats"),rankingsURL:function(){var e=this.get("data.code");if(!Ember.isEmpty(e)){return"/rankings/"+e}else{return"/rankings"}}.property("contestCode"),contestURL:function(){var e="/";var t=this.get("data.code");if(!Ember.isEmpty(t)){return e+t}return e}.property("contestCode"),nodeEditURL:function(){return"/node/"+this.get("nid")+"/edit"}.property("nid"),isTeamContest:function(){return this.get("data.isTeamContest")}.property("data.isTeamContest"),autoRefresh:function(){var e=this.get("data.autoRefresh");return Ember.isEmpty(e)?true:e}.property("data.autoRefresh"),teamsCount:function(){return this.get("data.teamsCount")}.property("data.teamsCount"),teamsListURL:function(){if(this.get("isTeamContest")){return"/teams/list/"+this.get("contestCode")}}.property("contestCode","isTeamContest"),canRefreshContestData:function(){return this.get("isContestRunning")&&this.get("autoRefresh")}.property("isContestRunning","autoRefresh"),dataObserver:function(){var e=this.get("data");if(!Ember.isEmpty(e)){document.title=e.name+" | CodeChef";Drupal.settings.username=e.user.username;this.set("loading",false)}}.observes("data"),didContestStartObserver:function(){var e=this;if(this.get("didContestStart")){var t=function(){setTimeout(function(){e.setTableEmptyMessage(null);$("#small-box_wrapper").remove();$("#small-box_background").remove();e.refreshContestData(true)},getRandomInt(3,10)*1e3)};pushSmall("<span>Contest has started, updating page </span><img style='padding: 2px; vertical-align: middle;' src='/misc/loader-icon.gif'/>",t)}}.observes("didContestStart"),isContestReminderAvailableObserver:function(){if(this.get("isContestReminderAvailable")){Drupal.settings.formHTML='<div id="cc-notification-viewport"><div style="margin: auto; width: 325px;padding: 15px;"><div cc-forms="form-description" class="ccl-font-h2 ccl-border-bottom ccl-padding-s ccl-margin-m  ccl-align-c">Set Contest Reminder</div><div class="ccl-su-disable" cc-forms="form-overlay"></div><div cc-forms="form"></div></div></div>';$(".contest-start-notification").unbind("click");$(".contest-start-notification").click(function(){var e=$(this).attr("data");notification_pop_up(e,true)})}}.observes("isContestReminderAvailable"),recentActivityInitObserver:function(){var t=this.get("recentActivityInit");var s=this;if(t){var r=Ember.ArrayController.createWithMixins(Ember.DataTableMixin,{loading:true,tableEmptyMessage:'<tr><td style="text-align: center;" colspan="5">No Recent Activity</td></tr>',init:function(){this.queryStringObserver()},ajaxUrl:"/api/recentactivity/"+s.get("contestCode")+"?",cacheMap:cacheClass.getInstance("1","contest-page-recentactivity-"+s.get("contestCode"),e,true),page:1,itemsPerPage:10,maxDisp:1,properties:["submission_date","handle","code","result_code","language"],headerAlias:Ember.Object.create({submission_date:"Date",code:"Problem",language:"Lang",result_code:"Result",handle:"User"}),setRequiredProperties:function(e){var t=this;try{t.set("availablePages",e.availablePages);t.set("totalItems",e.totalItems);t.set("generated",e.generated)}catch(s){console.log(s)}},queryStringObserver:function(){var e=this;e.set("loading",true);var t=e.get("cacheMap");var r=e.get("queryString");var i=Em.A();if(!t.has(r)){var o=function(o){try{if(o.status=="success"){o.generated=Date.now();e.setRequiredProperties(o);o.list.forEach(function(e){e["result_code"]="<img src='/misc/"+e["result_code"]+"'/>";e["submission_date"]=e["submission_date"];e["code"]="<a title='"+e["code"]+"' href='/"+s.get("contestCode")+"/problems/"+e["code"]+"'>"+e["code"]+"</a>";e["handle"]="<a title='"+e["handle"]+"' href='/users/"+e["handle"]+"'>"+e["handle"]+"</a>";i.addObject(e)});o.list=i;e.set("list",o.list);t.set(r,o,60);e.set("loading",false)}else{pushError(o.message+". Please Reload.")}}catch(n){console.log(n.stack)}};var n=function(){pushError("Some error occured. Please Reload.")};var a={url:this.get("ajaxUrl")+r,success:o,error:n};cAjax(a)}else{var l=t.get(r);e.setRequiredProperties(l);e.set("list",l.list);e.set("loading",false)}}.observes("queryStringChanged"),queryString:function(){var e=this;var t="page="+e.get("page");if(this.get("queryStringChanged")!=t){this.set("queryStringChanged",t)}return t}.property("page"),isAjaxified:true,searchable:false,filterable:false,sortable:false,rowTemplate:"recentActivityRow",queryParamsEnabled:false,actions:{nextPage:function(){if(this.get("page")>=this.get("availablePages")){return null}this.set("page",this.get("page")+1);this.get("queryString")},previousPage:function(){if(this.get("page")<=1){return null}this.set("page",this.get("page")-1);this.get("queryString")},pageByNum:function(e){this.set("page",e);this.get("queryString")}}});this.set("recentActivityController",r)}}.observes("recentActivityInit"),recentActivityOpenObserver:function(){var e=this.get("recentActivityOpen");var t=this.get("recentActivityInit");if(e){if(!t){this.set("recentActivityInit",true)}}}.observes("recentActivityOpen"),refreshTimeObserver:function(){var e=this.get("refreshTime");var t=this.get("canRefreshContestData");if(e>0&&t&&!this.get("ranklistFrozen")){this.set("refreshTimeMessage","The information will be updated in "+e+" seconds")}else if(e<=0&&t){this.set("refreshTimeMessage",null);this.set("refreshTime",getRandomInt(a.ttl,a.ttl+30));var s=a.__container__.lookup("controller:application").get("currentRouteName");if(!s||s=="contestPage"){this.refreshContestData()}}else{this.set("refreshTimeMessage",null)}if(this.get("ranklistFrozen")){this.set("refreshTimeMessage",this.get("ranklistFrozenMessage"))}}.observes("refreshTime"),isContestEndedObserver:function(){var e=this.get("cache");var t=this.get("isContestEnded");if(t){var s=function(t){if(t.status=="success"){e.set("runningUpcomingContests",t,a.ttl);setTimeout(function(){m(t.contests)},2e3)}else{}};if(e.has("runningUpcomingContests")){s(e.get("runningUpcomingContests"))}else{cAjax({url:"/api/runningUpcomingContests/data",success:s})}}}.observes("isContestEnded"),setReloadButton:function(){var e=this;var t=function(){e.refreshContestData(true)};$("#reload").unbind("click");$("#reload").bind("click",t)},refreshContestData:function(e){var t=this;if(e){t.get("cache").remove(this.get("contestCode"))}t.transitionToRoute("contestPage",{contest_code:t.get("contestCode")})},timer:function(){var e=this.get("data");if(!Ember.isEmpty(e)){if(!navigator.onLine){showInternetError()}var t=e.time;var s=parseInt(moment()/1e3);var r=t.offset;var i=t.end+r;var o=t.start+r;var n=t.freezing+r;this.set("isContestReminderAvailable",o-s>4200&&e.user.username);var a=function(e){t=[];var s=parseInt(e.asDays());t.push(s?s+" days":"");var r=e.hours();t.push(r?r+" hrs":"");var i=e.minutes();t.push(i?i+" mins":"");var o=e.seconds();t.push(o?o+" sec":"");return t.join(" ")};var l="";var c="";if(i-s<0){this.set("timeElapsed","<p>Contest Ended.</p>");this.set("isContestEnded",true);this.setTableEmptyMessage('<div >Please click <a id="reload">here</a> to reload. If problem persists, please report to bugs@codechef.com</div>');this.set("isContestRunning",false)}else if(i-s>0&&s-o>0){var d=this.get("isContestRunning");if(!d){this.set("didContestStart",true);this.setTableEmptyMessage("Loading problems for the contest. Please wait.")}if(!this.get("ranklistFrozen")){this.set("refreshTime",this.get("refreshTime")-1)}this.set("isContestRunning",true);c=moment.duration((i-s)*1e3);l=a(c);this.setReloadButton();this.set("timeElapsed","<p>Contest Ends In:</p><br/>"+l)}else if(i-s>0&&o-s>0){this.set("isContestRunning",false);c=moment.duration((o-s)*1e3);l=a(c);this.setTableEmptyMessage("Problems will be available in "+l);this.set("timeElapsed","<p>Contest Starts In:</p><br/>"+l)}if(e.isRanklistFrozen){this.set("ranklistFrozen",true);this.set("ranklistFrozenMessage","Ranklist froze "+a(moment.duration((s-n)*1e3))+" ago");this.set("refreshTimeMessage","Ranklist froze "+a(moment.duration((s-n)*1e3))+" ago")}}Em.run.later(this,this.timer,1e3)},setTableEmptyMessage:function(e){if(!Ember.isEmpty(e)){this.set("tableEmptyMessage",'<tr><td style="text-align: center; padding: 15px" colspan="4">'+e+"</td></tr>")}else{this.set("tableEmptyMessage",null)}},resetRulesStyle:function(){var e=this;Ember.run.later(this,function(){var t=$("#rules").find(".dataTable").find("tbody").find("div")[0];var s=$("#announcements").find(".dataTable").find("tbody").find("div")[0];function r(e){if(!Ember.isEmpty(e)){e.removeAttribute("style");if(e.childNodes.length>0){for(var t in e.childNodes){if(e.childNodes[t].nodeType==1)r(e.childNodes[t])}}}}r(t);r(s);e.setReloadButton()},2e3)},actions:{toggleRecentActivity:function(){this.toggleProperty("recentActivityOpen")}},sortByAndOrderObserver:function(){this._super();Ember.run.next(this,function(){i();o()})}.observes("sortBy","order"),loadingObserver:function(){if(!this.get("loading")){var e=this;Ember.run.next(e,function(){d(e);i();o();e.resetRulesStyle()})}}.observes("loading")});function d(e){Ember.run.scheduleOnce("afterRender",e,function(){Ember.run.next(e,function(){setTimeout(function(){p();try{if(typeof fbAsyncInit==="function"){fbAsyncInit()}}catch(t){d(e)}},1e3)})})}a.ContestProblemPageRoute=Ember.Route.extend({cache:t,setupController:function(e,t){getUserKey().then(function(e){r(e)},function(e){if(!Ember.isEmpty(e.message)){pushError(e.message)}else{pushError("Some error occurred")}});var s=t.contest_code;if(Ember.isEmpty(t.contest_code)){s="PRACTICE"}var i=t.problem_code;if(i!=i.toUpperCase()){pushError("Please check problem code. No such problem exists for this contest.");return}this.setData(s,i,e)},setData:function(e,t,s){s.set("loading",true);var r="/api/contests/"+e+"/problems/"+t;var i=this.get("cache");var o=e+t;var n=i.get(o);var l=this;var c=function(e,t){if(e.status=="success"){if(Ember.isEmpty(t)){var r=l.get("cache");var i=parseInt(moment()/1e3);var n=moment(e.time.current);e.time.offset=i-n;e.time.generated=i;var c=a.ttl;if(e.time.current>e.time.end_date){c=0}if(!Ember.isEmpty(e.body)){r.set(o,e,c)}}s.set("model",e)}else{pushAttention(e.message)}};var d=function(e){if(!Ember.isEmpty(e.message)){pushError(e.message)}else{pushError("Some error occurred")}};if(!Ember.isEmpty(n)){c(n,true)}else{cAjax({url:r,success:c,error:d})}}});a.ContestProblemPageController=Ember.Controller.extend({loading:true,cache:t,cacheId:function(){if(this.get("contestCode")){return this.get("contestCode")+this.get("problemCode")}else{return"PRACTICE"+this.get("problemCode")}}.property("contestCode","problemCode"),isSubmitAllowed:true,modelObserver:function(){if(!Ember.isEmpty(this.get("model"))){this.timer();document.title=this.get("model.problem_name")+" | CodeChef";Drupal.settings.username=this.get("model.user.username");this.set("loading",false)}}.observes("model"),isInTodo:function(){return this.get("model.todo")}.property("model.todo"),isTodoWidgetAvailable:function(){return this.get("model.problem_status")!=="solved"?true:false}.property("model.problem_status"),todoWidget:function(){var e=this.get("contestCode")?this.get("contestCode"):"";var t=this.get("problemCode");var s='<div class="todo-widget" style="visibility: visible; position: relative;top: 5px;"><input style="outline: none;" type="image" src="/sites/all/themes/abessive/images/add1.png" title="Add problem to Todo list" class="todo-button" width="25" height="25" problem="'+t+'" contest="'+e+'"><div class="todo-button-message"></div></div>';var r='<div class="todo-widget" style="visibility: visible; position: relative;top: 5px;"><input style="outline: none;" type="image" src="/sites/all/themes/abessive/images/add2.png" title="Problem already present in Todo list" class="todo-button" width="25" height="25"><div class="todo-button-message"></div></div>';return this.get("isInTodo")?r:s}.property("isTodoWidgetAvailable","isInTodo","username"),problemEditorialCheckbox:function(){return this.get("model.problem_editorial_checkbox")}.property("model.problem_editorial_checkbox"),isAdmin:function(){return this.get("model.user.username")=="admin"}.property("model.user.username"),tags:function(){return this.get("model.tags")}.property("model.tags"),author:function(){return this.get("model.problem_author")}.property("model.problem_author"),tester:function(){return this.get("model.problem_tester")}.property("model.problem_tester"),viewStartDate:function(){return this.get("model.time.view_start_date")}.property("model.time.view_start_date"),submitStartDate:function(){return this.get("model.time.submit_start_date")}.property("model.time.submit_start_date"),visibleStartDate:function(){return this.get("model.time.visible_start_date")}.property("model.time.visible_start_date"),endDate:function(){return this.get("model.time.end_date")}.property("model.time.end_date"),problemTimesArray:function(){var e=this.get("model.time");var t=Ember.A();if(!Ember.isEmpty(e)){$.each(e,function(e,s){t.push({key:e,value:moment(s*1e3)})})}return t}.property("model.time"),offset:function(){return this.get("model.time.offset")}.property("model.time.offset"),username:function(){return this.get("model.user.username")}.property("model.user"),contestCode:function(){return this.get("model.contest_code")}.property("model.contest_code"),category:function(){return this.get("model.category_name")}.property("model.category_name"),categoryLabel:function(){var e=this.get("category");if(e=="school"){return"Beginner"}else{if(typeof e==="string"){return e.capitalize()}return""}}.property("category"),contestName:function(){return this.get("model.contest_name")}.property("model.contest_name"),problemCode:function(){return this.get("model.problem_code")}.property("model.problem_code"),problemName:function(){return this.get("model.problem_name")}.property("model.problem_name"),partialBreadcrumbs:function(){var e=this.get("categoryLabel");var t=this.get("category");if(Ember.isEmpty(t)){return'<a href="/">Home</a>&nbsp;»&nbsp;<a href="/contests/">Compete</a>&nbsp;»&nbsp;'}else{return'<a href="/">Home</a>&nbsp;»&nbsp;<a href="/problems/'+t+'/">Practice('+e+")</a>&nbsp;»&nbsp;"+this.get("problemName")}}.property("category","problemName","categoryLabel"),editorialURL:function(){return this.get("model.editorial_url")}.property("model.editorial_url"),nodeEditURL:function(){return"/node/"+this.get("nid")+"/edit"}.property("nid"),contestProblemURL:function(){var e="/problems/"+this.get("problemCode");if(this.get("contestCode")){e="/"+this.get("contestCode")+e}return e}.property("contestCode","problemCode"),problemSubmitURL:function(){var e="/submit/"+this.get("problemCode");if(this.get("contestCode")){e="/"+this.get("contestCode")+e}return e}.property("contestCode","problemCode"),allSubmissionsURL:function(){var e="/status/"+this.get("problemCode");if(this.get("contestCode")){e="/"+this.get("contestCode")+e}return e}.property("contestCode","problemCode","username"),mySubmissionsURL:function(){return this.get("allSubmissionsURL")+","+this.get("username")}.property("allSubmissionsURL","username"),problemAuthorURL:function(){return"/users/"+this.get("author")}.property("author"),problemTesterURL:function(){return"/users/"+this.get("tester")}.property("tester"),commentsURL:function(){var e=this.get("contestProblemURL");return window.location.protocol+"//"+window.location.host+e}.property("contestProblemURL"),body:function(){return this.get("model.body")}.property("model.body"),languagesSupported:function(){return this.get("model.languages_supported")}.property("model.languages_supported"),sourceSizeLimit:function(){return this.get("model.source_sizelimit")}.property("model.source_sizelimit"),dateAdded:function(){return this.get("model.date_added")}.property("model.date_added"),maxTimeLimit:function(){return this.get("model.max_timelimit")}.property("model.max_timelimit"),nid:function(){return this.get("model.nid")}.property("model.nid"),showCheckbox:function(){return this.get("isAdmin")&&this.get("model.problem_editorial_checkbox")==this.get("problemEditorialCheckbox")}.property("isAdmin","model.problem_editorial_checkbox","problemEditorialCheckbox"),refreshProblemData:function(e){var t=this;if(e){t.get("cache").remove(this.get("cacheId"))}if(Ember.isEmpty(this.get("contestCode"))){t.transitionToRoute("practiceProblemPage",{problem_code:t.get("problemCode")})}else{t.transitionToRoute("contestProblemPage",{contest_code:t.get("contestCode"),problem_code:t.get("problemCode")})}},timer:function(){var e=this.get("model");if(!Ember.isEmpty(e)){var t=e.time;var s=parseInt(moment()/1e3);var r=t.offset;var i=this.get("endDate")+r;var o=this.get("submitStartDate")+r;this.set("isSubmitAllowed",s<=i&&s>=o);this.get("isSubmitAllowed")}Em.run.later(this,this.timer,1e3)},_isCheckedChanged:function(){var e=this.get("problemEditorialCheckbox");if(e){this.send("checked")}else{this.send("unchecked")}}.observes("problemEditorialCheckbox"),actions:{checked:function(){var e=this;if(!this.get("model.problem_editorial_checkbox")){$.ajax({url:"/admin/editorial/add/"+this.get("nid")+"/"+this.get("problemCode"),success:function(t){if(t==="Added"){e.set("model.problem_editorial_checkbox",true);e.send("updateModelInCache");alert("Editorial added.")}}})}},unchecked:function(){var e=this;if(this.get("model.problem_editorial_checkbox")){$.ajax({url:"/admin/editorial/delete/"+this.get("nid"),success:function(t){if(t==="Deleted"){e.set("model.problem_editorial_checkbox",false);e.send("updateModelInCache");alert("Editorial deleted.")}}})}},updateModelInCache:function(){var e=this.get("model");var t=this.get("cacheId");var s=this.get("cache");s.update(t,e,a.ttl)},reloadProblem:function(e){this.refreshProblemData(e)},toggleSuccessfulSubmissions:function(){this.toggleProperty("successfulSubmissionsOpen")}},isSuccessfulSubmissionsOpen:function(){if(this.get("successfulSubmissionsOpen")){if(Ember.isEmpty(this.get("successfulSubmissionsOpenFirst"))){$("#rankContentDiv").html('<p align="center"><img src="/sites/all/themes/abessive/images/ajax-loader.gif" /> Fetching content</p>');if(Ember.isEmpty(this.get("category"))){$("body").append("<input type='hidden' id='ccode' value='"+this.get("contestCode")+"'>")}$("body").append("<input type='hidden' id='pcode' value='"+this.get("problemCode")+"'>");onload_getpage_ssubmissions("next");this.set("successfulSubmissionsOpenFirst",true)}$("#rankContentDiv").show()}else{$("#rankContentDiv").hide()}}.observes("successfulSubmissionsOpen"),isTodoWidgetAvailableObserver:function(){setTimeout(n,2e3)}.observes("isTodoWidgetAvailable"),loadingObserver:function(){if(!this.get("loading")){var e=this;Ember.run.next(e,function(){d(e);i()})}}.observes("loading")});a.ContestProblemPageView=Ember.View.extend({templateName:"problemPage"});a.PracticeProblemPageRoute=a.ContestProblemPageRoute;a.PracticeProblemPageController=a.ContestProblemPageController;a.PracticeProblemPageView=Ember.View.extend({templateName:"problemPage"});function m(e){var t="<div style='padding: 1.5rem;'><div class='ccl-margin-auto'>"+"        <div class='ccl-align-c'>"+"            <div class='ccl-font-h2 ccl-margin-s ' style='font-size:7rem;'> ☹</div>"+"            <div class='ccl-font-h2 ccl-margin-s ccl-border-bottom ccl-padding-s'>This contest has ended</div>"+"            <div>"+"                <div class='ccl-font-p ccl-font-bold '>You can access the problems in the practice section <a href='/problems/easy'>here.</a>"+"                </div>"+"            </div>";if(!Ember.isEmpty(e)){t+="<div class='ccl-font-p '>OR</div>"+"<div class='  cl-margin-s'></div>"+"<div class='ccl-font-p  ccl-font-bold  ccl-margin-s'>You can join in our hot &amp; sizzling contests below:"+"</div>"+"<div class='ccl-clearfix ccl-margin-s ccl-mw-bar'>"+"<div class='ccl-float-left ccl-width-40 ccl-border-right-white'>Contest Name</div>"+"<div class='ccl-float-left ccl-width-35 ccl-border-right-white'> Date</div>"+"<div class='ccl-float-left ccl-width-25'> Duration</div>"+"</div>";for(var s=0;s<e.length;s++){var r=e[s];var i=r["code"];var o=r["name"];var n=moment(r["start_date"]*1e3).format("llll");var a=Math.floor(moment.duration((r["end_date"]-r["start_date"])*1e3).asHours());t+="<div style='padding:.5rem;' class='ccl-clearfix ccl-padding-m ccl-margin-s ccl-border-bottom  ccl-font-s'>"+"<div class='ccl-align-l ccl-float-left ccl-width-40 ccl-border-right'><a class='ccl-ellipsis' href='/"+i+"' title='"+o+"'>"+o+"</a></div>"+"<div class='ccl-float-left ccl-width-35 ccl-border-right'>"+n+" IST</div>"+"<div class='ccl-float-left ccl-width-25' title='$duration_title'>"+a+" hours</div>"+"</div>"}t+="<div class='ccl-align-l ccl-font-p ccl-font-bold'><a href='/contests'>more... </a></div>"}t+="        </div>"+"    </div>"+"</div>";invokeGenericModal({id:"contest-ended-popup",message:t,closeCross:true,areAllAllowed:true})}function u(e){if(e){var t="";$.each(e,function(e,s){$.each(s,function(s,r){t+='<span class="message-'+e+'">'+r+"</span><br/>"})});setTimeout(function(){pushInfo(t)},2e3)}}function p(){window.twttr=function(e,t,s){var r,i,o=e.getElementsByTagName(t)[0];if(e.getElementById(s)){return}i=e.createElement(t);i.id=s;i.src="https://platform.twitter.com/widgets.js";o.parentNode.insertBefore(i,o);return window.twttr||(r={_e:[],ready:function(e){r._e.push(e)}})}(document,"script","twitter-wjs")}}getUserKey().then(function(t){e(t)},function(e){e=JSON.parse(e.responseText);if(!Ember.isEmpty(e.message)){pushError(e.message)}else{pushError("Some error occurred")}})})();